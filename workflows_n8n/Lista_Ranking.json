={
  "createdAt": "2025-10-09T16:07:34.281Z",
  "updatedAt": "2025-10-09T17:16:52.000Z",
  "id": "1tuv7r0TLTv4yikL",
  "name": "Lista Ranking",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "path": "372e7d53-608e-4168-91bc-cc456f13360b",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        0,
        0
      ],
      "id": "0692d445-7ee3-4199-9b6a-09759d931b32",
      "name": "Webhook",
      "webhookId": "372e7d53-608e-4168-91bc-cc456f13360b"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT * FROM clasificacion_aggs",
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        208,
        0
      ],
      "id": "5367dc0e-c348-4bc6-8ccd-c91dd0a95279",
      "name": "Execute a SQL query",
      "credentials": {
        "mySql": {
          "id": "ptMDph8au7xSwRzr",
          "name": "MySQL datos_red"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Suponemos que la entrada es un array de 110 objetos\n// n8n pasa los items en $input.all()\n\nconst concentradores = $input.all().map(item => item.json);\n\n// Ordenar por puntaje_ranking (descendente)\nconst sorted = [...concentradores].sort((a, b) => \n  parseFloat(b.puntaje_ranking) - parseFloat(a.puntaje_ranking)\n);\n\n// Generar HTML\nconst html = `\n<!DOCTYPE html>\n<html lang=\"es\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\n  <title>Ranking de Concentradores</title>\n  <style>\n    body { font-family: sans-serif; background: #f0f2f5; padding: 20px; }\n    .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 8px; }\n    table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n    th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }\n    th { background: #f8f9fa; }\n    .score { font-weight: bold; color: #1890ff; text-align: right; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Ranking de Concentradores (${sorted.length} items)</h1>\n    <table>\n      <thead>\n        <tr>\n          <th>#</th>\n          <th>Acronimo</th>\n          <th>Equipo</th>\n          <th>Región</th>\n          <th>Puntaje Ranking</th>\n          <th>Puntaje Región</th>\n          <th>Puntaje Tráfico</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${sorted.map((item, i) => `\n          <tr>\n            <td>${i + 1}</td>\n            <td>${item.Acronimo || ''}</td>\n            <td>${item.Equipo || ''}</td>\n            <td>${item.Region_MST || ''}</td>\n            <td class=\"score\">${parseFloat(item.puntaje_ranking).toFixed(2)}</td>\n            <td class=\"score\">${item.puntaje_region}</td>\n            <td class=\"score\">${parseFloat(item.puntaje_trafico).toFixed(2)}</td>\n          </tr>\n        `).join('')}\n      </tbody>\n    </table>\n  </div>\n</body>\n</html>\n`;\n\n// Devolver un ÚNICO item con el HTML\nreturn [\n  {\n    json: {\n      htmlContent: html\n    }\n  }\n];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        416,
        0
      ],
      "id": "1eaa6cea-885f-48d1-91ff-a57277e66055",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.htmlContent }}",
        "options": {
          "responseCode": 200,
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/html"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        624,
        0
      ],
      "id": "1ef64911-b8f2-4108-b0b1-6853a829843c",
      "name": "Respond to Webhook"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Execute a SQL query",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Execute a SQL query": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "2fa4d48a-8be5-4f70-b3a7-7830f0004b05",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-10-09T16:07:34.284Z",
      "updatedAt": "2025-10-09T16:07:34.284Z",
      "role": "workflow:owner",
      "workflowId": "1tuv7r0TLTv4yikL",
      "projectId": "QdIaKjwyS02MMGZQ",
      "project": {
        "createdAt": "2025-09-11T18:03:44.820Z",
        "updatedAt": "2025-09-11T18:10:14.443Z",
        "id": "QdIaKjwyS02MMGZQ",
        "name": "Soporte Acceso Empresas  Empresas <saf.empresas@claro.com.ar>",
        "type": "personal",
        "icon": null,
        "description": null,
        "projectRelations": [
          {
            "createdAt": "2025-09-11T18:03:44.820Z",
            "updatedAt": "2025-09-11T18:03:44.820Z",
            "userId": "4facc838-fc29-4888-93e5-fd2ef787b161",
            "projectId": "QdIaKjwyS02MMGZQ",
            "user": {
              "createdAt": "2025-09-11T18:03:44.372Z",
              "updatedAt": "2025-10-10T04:00:04.000Z",
              "id": "4facc838-fc29-4888-93e5-fd2ef787b161",
              "email": "saf.empresas@claro.com.ar",
              "firstName": "Soporte Acceso Empresas",
              "lastName": " Empresas",
              "personalizationAnswers": {
                "version": "v4",
                "personalization_survey_submitted_at": "2025-09-11T18:11:25.739Z",
                "personalization_survey_n8n_version": "1.110.1",
                "automationGoalDevops": [
                  "ticketing-systems-integrations"
                ],
                "companyIndustryExtended": [
                  "telecoms"
                ],
                "companySize": "1000+",
                "companyType": "other",
                "role": "devops",
                "reportedSource": "event"
              },
              "settings": {
                "userActivated": true,
                "firstSuccessfulWorkflowId": "qNvPVx6pVl6SWob0",
                "userActivatedAt": 1758135955025,
                "npsSurvey": {
                  "responded": true,
                  "lastShownAt": 1759778484200
                },
                "easyAIWorkflowOnboarded": true
              },
              "disabled": false,
              "mfaEnabled": false,
              "lastActiveAt": "2025-10-10",
              "isPending": false
            }
          }
        ]
      }
    }
  ],
  "tags": []
}